{% extends "../dashboard.html" %}
{% load static %}
{% block dashboard %}

<section style='margin-top: 57px;' id="featured-blog" class="featured-blog">
    <div class="container" data-aos="fade-up">
        <div style="padding-bottom: 0px;" class="section-header">
            <h2>My Profile</h2>
        </div>
    <!--Table-->
    <div class="container">
        <div class="row my-4">
            <div class="col-md-12">
                <div class="card ">
                    <div style="background-color: #5483b3" class="card-header text-white">
                       
                    </div>
                    <div class="card-body ">
                        <div class="row">
                          {% if user_profile.user_img %}
                              <img style="border-radius: 40px; width: 400px; height: auto;"class="img-thumbnail" src="{{ user_profile.user_img.url }}" alt="">
                          {% else %}
                              <!-- Render your default image here -->
                              <img style="border-radius: 40px; width: 400px; height: auto;" class="img-thumbnail" src="{% static 'img/user.png' %}" alt="">
                          {% endif %}
                            
                            <div style="margin-top: 20px; margin-bottom: 20px;" class="col-md-8">
                                <a style="margin-bottom: 15px; padding-left: 30px; border-radius:20px; padding-right: 30px; background-color: #5483b3" class="btn text-white btn-sm float"
                                    href="{% url 'create-blog' %}">+ New Blog Post</a> <button style="padding-left: 30px; border-radius:20px; padding-right: 30px; background-color: #5483b3" class="btn text-white btn-sm float-end" data-toggle="modal" data-target="#profileModalCenter"
                                    >Edit</button>
                                <hr>
                                <div style="margin-bottom: 15px;" class="d-flex flex-column align-items-center table-row">
                                    <h3>{{user_profile.first_name}} {{user_profile.last_name}} {{user_profile.other_names}}</h3>
                                    <p>@{{user.username}}</p>
                                </div>

                                <div style="margin-top: 20px;" class="d-flex flex-column align-items-center">
                                    <p style="font-size: 14px; color: #5483b3; text-justify: justify;
                                    text-align: justify;
                                    text-align-last: center;">Bio: {{user_profile.bio}}</p>
                                </div>
                                <div style="margin-top: 20px;" class="d-flex flex-column align-items-center">
                                    <div class="social-links d-flex  mt-3">
                                        <a href="{{user_profile.twitter_link}}" class="twitter"><i style="padding-left: 20px;
                                            padding-right: 20px;" class="bi bi-twitter"></i></a>
                                        <a href="{{user_profile.facebook_link}}" class="facebook"><i style="padding-left: 20px;
                                            padding-right: 20px;"  class="bi bi-facebook"></i></a>
                                        <a href="{{user_profile.instagram_link}}" class="instagram"><i style="padding-left: 20px;
                                            padding-right: 20px;"  class="bi bi-instagram"></i></a>
                                    </div>
                                </div>
                                
                                
                            </div>
                            
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </div>

<!-- Modal -->
<div style="" class="modal fade" id="profileModalCenter" tabindex="-1" role="dialog" aria-labelledby="profileModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="profileModalCenterTitle">Update Your Profile</h5>
        <button type="button" class="btn-close" data-dismiss="modal" aria-label="Close">
        </button>
      </div>
      <div class="modal-body">
        <div class="">
          <form method="post" novalidate enctype="multipart/form-data" class="profile-form">
            {% csrf_token %}
            <div class="form-group">
                <label for="id_user_img">Profile Image:</label>
                {% comment %} <input type="file" id="file-input" name="user_img" accept="image/*" style="display: none;">
            <label for="file-input" class="custom-file-upload">Choose Image</label> {% endcomment %}
                {{ profile_form.user_img }}
            </div>
            {% comment %} <div class="row">
              <div class="col-md-6">
                  <img style="width: 80px; height: auto;" id="selected-image" src="#" alt="Selected Image" style="display: none;">
              </div>
          </div> {% endcomment %}
            <div class="form-group">
                <label for="id_first_name">First Name:</label>
                {{ profile_form.first_name }}
            </div>
            <div class="form-group">
                <label for="id_last_name">Last Name:</label>
                {{ profile_form.last_name }}
            </div>
            <div class="form-group">
                <label for="id_other_names">Other Names:</label>
                {{ profile_form.other_names }}
            </div>
            <div class="form-group">
                <label for="id_phone_number">Phone Number:</label>
                {{ profile_form.phone_number }}
            </div>
            <div class="form-group">
                <label for="id_bio">Bio:</label>
                {{ profile_form.bio }}
            </div>
            <div class="form-group">
                <label for="id_twitter_link">Twitter Link:</label>
                {{ profile_form.twitter_link }}
            </div>
            <div class="form-group">
                <label for="id_facebook_link">Facebook Link:</label>
                {{ profile_form.facebook_link }}
            </div>
            <div class="form-group">
                <label for="id_instagram_link">Instagram Link:</label>
                {{ profile_form.instagram_link }}
            </div>
            <button type="submit" class="btn btn-primary">Update Profile</button>
        </form>
        
        </div>
      </div>
      <div class="modal-footer">
        <p style="font-size: 10px; color: #052659">Blogicraft</p>
      </div>
    </div>
  </div>
</div>

    <!--End Table-->

    </div>
<style>
  /* Styling for the profile form */
.profile-form {
  max-width: 500px;
  margin: 0 auto;
}

/* Styling for form groups */
.form-group {
  margin-bottom: 20px;
}

/* Styling for labels */
.form-group label {
  display: block;
  font-weight: bold;
}

/* Styling for form inputs */
.form-control {
  width: 100%;
  padding: 10px;
  border: 1px solid #ccc;
  border-radius: 5px;
  box-sizing: border-box;
}

/* Styling for submit button */
.btn-primary {
  background-color: #007bff;
  color: #fff;
  border: none;
  border-radius: 5px;
  padding: 10px 20px;
  cursor: pointer;
}

/* Hover effect for submit button */
.btn-primary:hover {
  background-color: #0056b3;
}
/* Styling for form inputs */
.profile-form input[type="text"],
.profile-form input[type="url"],
.profile-form textarea {
    width: calc(100% - 20px);
    padding: 10px;
    margin: 0 10px;
    border: 1px solid #ccc;
    border-radius: 20px;
    box-sizing: border-box;
}

/* Styling for submit button */
.profile-form button[type="submit"] {
    width: calc(100% - 20px);
    margin: 0 10px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 20px;
    padding: 10px 0;
    cursor: pointer;
}

/* Hover effect for submit button */
.profile-form button[type="submit"]:hover {
    background-color: #0056b3;
}
/* Custom styling for the file input button */
.custom-file-upload {
  display: inline-block;
  padding: 10px 20px;
  cursor: pointer;
  background-color: #007bff;
  color: #fff;
  border: none;
  border-radius: 20px;
  font-size: 16px;
}

/* Hover effect for the file input button */
.custom-file-upload:hover {
  background-color: #0056b3;
}
</style>
</section>

<!-- ======= Blog Section ======= -->
<section style="padding-top: 15px;" id="blog" class="blog">
    <div class="container" data-aos="fade-up">
      <div class="section-header">
        <h2>My Blog Posts</h2>

      </div>

      <div style="margin-left: 10px; margin-right: 10px;" class="row g-5">

        <div class="col-lg-12" data-aos="fade-up" data-aos-delay="200">

          <div class="row gy-5 posts-list">
            {% if user_blogs %}
                {% for blog in user_blogs %}
                <div class="col-lg-6">
                  <article class="d-flex flex-column">
                    <div class="post-content">
                      <div  class="post-img">
                        {% if blog.image1 %}
                        <img  style="border-radius: 20px;" src="{{ blog.image1.url }}" alt="" class="img-fluid">
                        {% endif %}
                        
                      </div>
      
                      <h2 class="title">
                        <a href="{% url 'blog-details' blog.id %}">{{blog.title}}</a>
                      </h2>
      
                      <div class="meta-top">
                        <ul>
                          <li class="d-flex align-items-center"><i class="bi bi-person"></i> <a href="blog-details.html">{{blog.user}}</a></li>
                          <li class="d-flex align-items-center"><i class="bi bi-clock"></i> <a href="{% url 'blog-details' blog.id %}"><time datetime="2022-01-01">{{blog.date_created}}</time></a></li>
                          {% comment %} <li class="d-flex align-items-center"><i class="bi bi-chat-dots"></i> <a href="{% url 'blog-details' blog.id %}">{{}}</a></li> {% endcomment %}
                        </ul>
                      </div>
      
                      <div style="margin-left: 0px; margin-right: 10px;" class="content">
                        <p>
                          {{ blog.teaser}}
                        </p>
                      </div>
                      <hr>
                    
                    <div class="read-more mt-auto d-flex justify-content-between">
                      <a href="{% url 'edit-blog' pk=blog.pk %}" style="margin-left: 30px;"> <i style="font-size: 1.5em;" class="bi bi-pencil-square"></i></a>
                      <a href="{% url 'blog-details' blog.id %}" style="font-size: 17px;">Read More <i class="bi bi-arrow-right"></i></a>
                      <form method="post" action="{% url 'delete-blog' pk=blog.pk  %}">
                        {% csrf_token %}
                        <input type="hidden" name="delete-blog" value="{{ blog.id }}">
                        <button type="submit" class="btn" style='color: red;'><i style="font-size: 1.5em;" class="bi bi-trash"></i></button>
                    </form>
                      

                    <div class="d-flex justify-content-center">
                    </div>
                  </div>

                  </article>
                </div><!-- End post list item -->
                {% endfor %}
            {% else %}

                <div class="col-lg-6">
                  <article class="d-flex flex-column">
                    <div class="post-content">
                      <div  class="post-img">
                        <img  style="border-radius: 20px;" src="{% static 'img/banner1.png' %}" alt="" class="img-fluid">                    
                      </div>
      
                      <h2 class="title">
                        <a href="">No blog post yet.</a>
                      </h2>
                      <hr>
                      <div style="margin-left: 0px; margin-right: 10px;" class="content">
                        <p>
                          Start writing - Blogicraft
                        </p>
                      </div>
                    </div>

                  </article>
                </div><!-- End post list item -->
            {% endif %}    


            

          </div><!-- End blog posts list -->

          

        </div>

      </div>

    </div>
  </section><!-- End Blog Section -->
  <style>
    .card {
        border: 1px solid #5483b3;  /* Adjust color and style as needed */
      }
    .table-row {
        border-bottom: 1px solid #5483b3; /* Adjust border style and color as needed */
    }
    .social-links {
        font-size: 2rem; /* Adjust font-size as needed */
      }
      .post-content {
        background-color: #5483b32a;
        padding: 20px;  /* Add some padding for spacing between content and border */
        border-radius: 30px;
      }
 
      
      
</style>

{% comment %} <script>
  document.getElementById('file-input').addEventListener('change', function() {
    var file = this.files[0];
    var reader = new FileReader();
    
    reader.onload = function(e) {
        var imgElement = document.getElementById('selected-image');
        imgElement.src = e.target.result;
        imgElement.style.display = 'block';
    }
    
    reader.readAsDataURL(file);
});

</script> {% endcomment %}
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

{% endblock dashboard %}